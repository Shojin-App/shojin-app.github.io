<header class="responsive transparent top-nav">
  <nav class="transparent">
    <img src="/app_icon.png" alt="Shojin App Icon" class="app-icon" />
    <h5 class="max headline-medium text-gradient bold">Shojin App</h5>
    <div class="space"></div>
    <button id="theme-toggle" class="circle transparent">
      <i class="material-symbols-rounded">light_mode</i>
    </button>
    <a
      href="https://twitter.com/search?q=%23Shojin_App"
      target="_blank"
      class="button circle transparent twitter-button"
    >
      <img class="twitter-icon" src="/twitter-icon.svg" alt="Twitter" />
    </a>
    <a
      href="https://github.com/Shojin-App/shojin_app"
      target="_blank"
      class="button circle transparent github-button"
    >
      <img
        class="github-icon github-icon-dark"
        src="/github-mark.svg"
        alt="GitHub"
      />
      <img
        class="github-icon github-icon-light"
        src="/github-mark-white.svg"
        alt="GitHub"
      />
    </a>
  </nav>
</header>

<script>
  const themeToggle = document.getElementById("theme-toggle");
  const themeIcon = themeToggle?.querySelector("i");

  const updateIcon = () => {
    if (!themeIcon) return;
    const isDark = document.body.classList.contains("dark");
    themeIcon.textContent = isDark ? "light_mode" : "dark_mode";
  };

  // Initial update
  updateIcon();

  themeToggle?.addEventListener("click", () => {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
    const isDark = document.body.classList.contains("dark");
    localStorage.setItem("theme", isDark ? "dark" : "light");
    updateIcon();
  });
</script>

<style>
  .app-icon {
    height: 32px;
    width: auto;
    margin-right: 12px;
    border-radius: 0;
    object-fit: contain;
  }

  .github-button {
    width: 44px;
    height: 44px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-medium);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .github-button:hover {
    background: var(--surface-container-high);
    transform: scale(1.05);
  }

  .github-icon {
    width: 22px;
    height: 22px;
    object-fit: contain;
    border-radius: 0 !important;
    position: absolute;
  }

  .github-icon-dark {
    display: none;
  }

  .github-icon-light {
    display: block;
  }

  :global(body.dark) .github-icon-dark {
    display: none;
  }

  :global(body.dark) .github-icon-light {
    display: block;
  }

  :global(body.light) .github-icon-dark {
    display: block;
  }

  :global(body.light) .github-icon-light {
    display: none;
  }

  .twitter-button {
    width: 44px;
    height: 44px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-medium);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .twitter-button:hover {
    background: var(--surface-container-high);
    transform: scale(1.05);
  }

  .twitter-icon {
    width: 22px;
    height: 22px;
    object-fit: contain;
    border-radius: 0 !important; /* Prevent inherited border-radius */
  }

  :global(body.dark) .twitter-icon {
    filter: brightness(0) invert(1); /* White in dark mode */
  }

  :global(body.light) .twitter-icon {
    filter: brightness(0); /* Black in light mode */
  }
</style>
